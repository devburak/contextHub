# Copy this file to .env and fill in the values for your environment
# Environment configuration for contextHub

# The port on which the API server listens
PORT=3000

# Secret used to sign JWT tokens.  Use a long, random string in production.
JWT_SECRET=your-jwt-secret

# MongoDB connection string + pool configuration
MONGODB_URI=mongodb://localhost:27017/contextHub
# Optional tuning (defaults shown)
# MONGODB_MAX_POOL_SIZE=50
# MONGODB_MIN_POOL_SIZE=5
# MONGODB_MAX_IDLE_TIME_MS=30000
# MONGODB_SERVER_SELECTION_TIMEOUT_MS=8000
# MONGODB_SOCKET_TIMEOUT_MS=30000
# MONGODB_WAIT_QUEUE_TIMEOUT_MS=2000
# Automatically create indexes on every server start (defaults to false in production)
# MONGODB_AUTO_CREATE_INDEXES=false

# Cloudflare R2 access key and secret (for media storage)
R2_ACCESS_KEY=your-access-key
R2_SECRET_KEY=your-secret-key
R2_BUCKET=my-bucket

# Upstash Redis logging configuration
# Set to false to keep runtime off while retaining credentials for later use
UPSTASH_REALTIME_ENABLED=true
UPSTASH_TOKEN=replace-with-token
UPSTASH_ENDPOINT=https://your-workspace.upstash.io
# API usage counters (choose provider)
API_USAGE_REDIS_PROVIDER=upstash
# Optional tuning (defaults shown)
# UPSTASH_CONNECT_TIMEOUT_MS=20000
# UPSTASH_RETRY_ATTEMPTS=3
# UPSTASH_RETRY_DELAY_MS=250
# UPSTASH_RETRY_MAX_DELAY_MS=4000
# UPSTASH_MAX_FAILURES=5
# UPSTASH_FAILURE_COOLDOWN_MS=300000
# UPSTASH_VERBOSE_LOGGING=false

# Webhook dispatcher & scheduler controls
WEBHOOK_DISPATCH_LIMIT=50
WEBHOOK_DISPATCH_INTERVAL_MS=5000
DOMAIN_EVENT_BATCH_LIMIT=100
WEBHOOK_MAX_RETRY_ATTEMPTS=5
WEBHOOK_RETRY_BACKOFF_MS=60000
WEBHOOK_FAILED_CLEANUP_MS=604800000 # 7 days
SCHEDULED_PUBLISH_LIMIT=50

# Cron endpoint secret (for /api/cron/webhooks)
# Generate a strong random token: openssl rand -hex 32
CRON_SECRET_TOKEN=your-secret-token-here

# Other configuration values will be added as new modules are implemented.
